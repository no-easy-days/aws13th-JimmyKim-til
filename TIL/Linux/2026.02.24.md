# [2026-02-24]

## ☀️ 오늘의 목표

- [리눅스 FTP, TFTP, PxE 서버]

## 📝 배운 내용 (Today I Learned)


### FTP 서버
- File Transfer Protocol. TCP 통신을 하며 21번 포트 : 세션 수립 / 20번 포트 : 데이터 전송. 추가 작업이 있을 경우 랜덤 포트 할당.
1. 서버단 ~ FTP 구성 모듈 패키지 설치
   - yum install -y vsftpd
     ※ 정상적으로 설치되면, /var/ftp 디렉토리(FTP 서버의 최상위 경로. ***루트 디렉토리***)가 자동으로 생성된다.
2. FTP Daemon 활성화
   - systemctl restart vsftpd & systemctl enable vsftpd
4. 클라이언트단 ~ FTP 명령어 모듈 패키지 설치
   - yum install -y ftp
5. 명령어 입력을 통해 FTP 서버 접속
   - ftp <서버주소>
     ※ 정상 접속되면, ID & PW를 입력해야 한다. 익명을 원할 경우 anonymous로 로그인
   - dir : ftp 서버 접속 완료 후 사용할 수 있는 명령어, ls -al 과 같은 기능을 한다.
   - get : ftp 서버 접속 완료 후 사용할 수 있는 명령어, 클라이언트 단으로 ***접속했던 경로를 바탕으로 대상 파일을 다운로드***.
     ※ 특정 유저로 ftp 서버에 접속했을 경우, 홈 디렉토리로 다운될 것이다.
     ※ 리눅스 서버 내 생성되어 있는 유저 정보 조회
        - cat /etc/passwd
          <img width="1125" height="757" alt="image" src="https://github.com/user-attachments/assets/1118d8cd-d777-4543-9351-8089818d162c" />


### TFTP 서버
- ***"trivial" ~ 사소한***. 간단한 파일을 유효성&신뢰성 확인 없이 일방적으로 전송하는 프로토콜 UDP 통신을 하며 69번 포트 사용.
- 운영체제 구성이 제대로 되어있지 않거나, FTP 서버를 사용할 수 없는 클라이언트 측에서 사용한다.
1. 서버단 ~ TFTP 구성 모듈 패키지 설치
   - yum install -y tftp-server
2. TFTP Daemon 활성화
   - systemctl restart tftp & systemctl enavble tftp  → 얘는 d 안붙음! 주의하자.
     ※ 정상적으로 설치되면, /var/lib/tftpboot 디렉토리(TFTP 서버의 루트 디렉토리)가 자동으로 생성된다.
3. 클라이언트단 ~ TFTP 명령어 모듈 패키지 설치
   - yum install -y tftp
4. 명령어 입력을 통해 TFTP 서버 접속
   - tftp <서버주소>
     > 유효성, 신뢰성 검증이 없기 때문에 바로 접속 된다.


### PxE 서버
- Preboot eXecution Envirionment. 부팅 프로세스 이전에 구동된다.
- 일반적인 부팅 프로세스
  - 전원 On → POST(Power On Self Test, 물리 장치 점검)
  - Boot-Loader (부팅에 필요한 컨피그 파일들 불러오는 프로세스)
  - OS 부팅 (물리 장치 환경 & 각종 소프트웨어 환경 구성들을 불러온다)
- 다수의 ***Bare Metal(OS가 설치되지 않은 깡통) 서버***를 대상으로 OS를 설치하는 메커니즘. 
- 베어 메탈 서버는 ***물리적으로"만" 연결***된 상태.
  - 순서 : ***①DHCP 서버(IP 부여해줘야함) → ②TFTP 서버(Boot-Loader, 램디스크 설정 등) → ③FTP or HTTP 서버(각종 필요한 파일 전송)***
 

1. 서버단 ~ 필요한 구성 모듈 패키지 설치
   - yum install -y dhcp tftp-server vsftpd httpd (FTP, httpd는 사용할 모듈에 맞춰서.)
2. DHCP 서버 구성
   - vi /etc/dhcp/dhcpd.conf
     ```
     subnet <DHCP로 IP 부여할 Network Address> netmask <DHCP로 IP 부여할 네트워크 망의 서브넷 마스크>
     {
         option routers <게이트웨이 주소>; 

         option subnet-mask <서브넷 마스크>; 
     
         range dynamic-bootp <부여할 IP 시작 주소> <부여할 IP 마지막 주소>; 
         # 할당 가능한 IP 범위
         # dynamic-bootp : 고전적인 방식. IP를 부여받을 수 없는 상황에서도 부여 가능.

         option domain-name-servers <DNS 서버 IP 주소>; 

         allow booting; 
         # 부팅 허용

         next-server <TFTP 서버가 구축된 IP 주소>; 

         filename "pxelinux.0"; 
         # Boot-Loader 파일명
     }
     ```
   - systemctl restart dhcpd & systemctl enable dhcpd ← 얘는 d 가 붙는다~~
3. TFTP 서버에 필요한 파일 구성
   > 기본적으로, OS 설치용 iso 파일 내에 저장되어 있다. 그걸 가지고 미리 준비하는 프로세스라고 생각하면 된다.
   
   
   - vmlinuz : 압축된 리눅스 커널
     - cp /media/images/pxeboot/vmlinuz /var/lib/tftpboot
   - initrd.img : 램디스크 파일 (램을 마치 디스크 처럼 사용하도록 해주는 Binary 파일)
     - cp /media/images/pxeboot/initrd.img /var/lib/tftpboot
   - pxelinux.0 : 리눅스 OS를 위한 Boot-Loader 파일
     - cp /usr/share/syslinux/pxlinux.0 /var/lib/tftpboot
       ※ iso 파일에 없다. yum install -y syslinux 로 패키지 설치하면 /usr/share/syslinux 밑에 설치된다.
   - pxelinux.cfg : Boot-Loader Config 파일이 저장된 폴더
     - mkdir /var/lib/tftpboot/pxelinux.cfg
     - vi /var/lib/tftpboot/pxelinux.cfg/default
       ※ Boot-Loader Default Config 값 저장 파일 생성
       ```
       DEFAULT centos7_pxe
       # CentOS7 기준!!

       LABEL centos7_pxe
       kernel vmlinuz
       APPEND initrd=initrd.img repo=ftp://<ftp 서버 주소>/<iso 파일 저장 위치>
       ```
   - systemctl restart tftp

     
4. OS 설치용 iso 파일 전송용 서버 구성
   > 마운트 포인트를 잡아서 복사하던지, 다른 곳에서 복사해오던지 목적은 FTP 서버 루트 디렉토리로 설치 파일 옮겨준다.
   

   - cp -r /media/* /var/ftp/pub
   - systemctl restart vsftpd


> 궁극적으로는, "깡통 서버에는 FTP를 활성화 못하니까" 앞에 DHCP, TFTP 로 구성 잡아주고 그걸 바탕으로 iso 파일 받아와주는 것!


### Kick Start
- 위의 PxE 과정이 다 끝나면, OS 설치를 위해 GUI 화면으로 넘어간다. 결국엔 또 클릭, 클릭을 해줘야하는데... 이 행위도 자동화 하는 방법.


## 🔥 도전 과제 & 해결 (Challenge & Solution)

- **과제/문제**: X
- **시도 및 해결**: X

## 💭 오늘의 회고 (Retrospective)

- **Keep (좋았던 점)**: 과제를 진행하며 슈퍼네팅 개념과 default Route의 개념을 이제야 느낌이 왔다.
- **Problem (아쉬웠던 점)**: 각 서버 별 게이트웨이를 실수하지 말자! 아직까지는 헷갈리는 것 같다.
- **Try (시도할 점)**: 놓치지말고 모르는 내용이면 꼭 캐치 해내기.

## 🔗 참고 자료 (References)
