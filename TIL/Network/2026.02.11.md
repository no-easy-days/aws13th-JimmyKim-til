# [2026-02-11]

## ☀️ 오늘의 목표

- [네트워크 이론 ~ 라우팅]

## 📝 배운 내용 (Today I Learned)


### 라우팅(Routing)
- 라우팅 테이블 확인을 위한 Cisco 명령어 : do show ip route
- Next Hop : 다른 네트워크로 *깡총* 뛰어가기 위해, ***같은 네트워크*** 상에서의 접점(Interface)를 칭함.
- ***목적지 네트워크(Network Address & SubnetMask) / Next-Hop*** 두 가지 정보가 필요하다!
- N개의 네트워크가 토폴로지에 존재한다면, 각 라우터들은 N개의 네트워크에 대한 정보를 담고 있다.
- *라우팅을 한쪽만 해줄 경우, 다시 돌아올 수가 없기 때문*에 결과적으로는 통신이 불가능하다.
 
1. 정적 라우팅(static) : 수동 + 고정.
   - Cisco 명령어: ip route <목적지 Network Address> <SubnetMask> <Next-Hop>
   <img width="830" height="463" alt="image" src="https://github.com/user-attachments/assets/be9836dd-8b0e-49f6-a7dd-2a471588597d" />

   - 목적지 Network Address 및 Next-Hop은 반드시 명시해야 하며, 라우팅 테이블에 정상 등록되었는지 확인해야 한다.
   - 어디로 가야할지만 중요할 뿐이지 그 다음은 내 소관이 아니!

   
2. 동적 라우팅(Dynamaic) : 자동 + 가변. 고가용성이며 특정 경로 문제 발생 시 자동으로 다른 경로로 재구성한다.
   - Link-State 방식을 가장 많이 사용하고, 그중 ***OSPF***가 표준처럼 사용된다.
   - **OSPF(Open Shortest Path First)**
     - "가장 짧은 경로 찾기", 인접한 라우터들로 받은 팩트(가공되지 않았음)를 기반으로 가장 빠른 경로를 스스로 계산한다.
     

     ※ Cisco 명령어


       ① router ospf 10(PID, 하나의 라우터에서 여러개의 OSPF를 가질수 있기 때문에 구분 용도로 적용) : 라우팅 프로토콜 설정 진입


       ② router-id 1.1.1.1 : 라우터 식별용 고유 ID 부여 (Network Advertising 전에 적용 권장!!)


       ③ network 10.10.10.20 ***<WildCardMask>*** area 0 : Advertising 수행.
         - ***WildCardMask : SubnetMask의 반전된 형태로, 필터 느낌으로 적용한다. "0 : Match, 1 : Ingore"***
  
           > 의미 : 10.10.10.20이 속한 네트워크 대역의 모든 인터페이스를 OSPF에 포함하라!
       

       ④ do show ip route : 정상적으로 수행되었을 경우, ***"O"*** 형태로 라우팅 테이블이 추가 구성되는 것을 확인 가능 


### DHCP(Dynamic Host Configuration Protocol)
- 호스트에게 IP 주소(GateWay, SubnetMask + DNS 서버 정보)를 자동으로 부여하는 방식
- ***UDP를 활용***한다. (Server : 67번 포트 / Client : 68번 포트)
- 항상 정보를 제공받는 입장(Client)을 먼저 고려해야한다.
- ***DORA*** 의 순서로 진행된다. **Discover(Broadcast)** / **Offer(IP Address)** / **Request(오! 그거쓸게)** / **Ack(그래 그거써~)**
  <img width="882" height="538" alt="image" src="https://github.com/user-attachments/assets/88ad5bdb-1c2e-41e3-a865-ecbd56516d28" />


- Gratuitious ARP(GARP) : Ack 단계 직전, 그 IP Address를 쓰는 사람이 있는지 같은 네트워크 대역대에서 확인할 때 쓰인다. Static으로 IP를 지정했을 경우 충돌을 방지하기 위해 도입되었다.
- DHCP가 만약 여러대이면, Client는 가장 가까운(빨리 주소 정보를 보내주는) Server로 부터 정보를 받아 반영한다. (물론 좋지 않다.)


※ Cisco 명령어)
  - ip dhcp pool <풀 이름> : dhcp 설정 진입
  - default-router <ip 주소> : 클라이언트 입장에서의 게이트웨이 지정
  - network <Network-Address> <SubnetMask> : 부여받을 대역 설정 ← **(OSPF랑 다르다! 주의하자)**


### VLSM(Variable Length Subnet Mask)
> 비균등 서브네팅 기법

- 네트워크 대역을 ***규모가 큰 순서대로 나열***한다.
- 나열된 서브넷을 계산하여 서브네팅을 수행한다. 연습만이 살길이다!!!


### Default Route
- 목적지가 특정되지 않았을 때 가는 경로. **"Next-Hop"**
- 여기서 Default의 의미는 기본이라는 뜻보단 ***자동***으로 골라진 것.
- Longest Match Rule : Default Route 설정이던지 간에 목적지가 겹칠 경우, *가장 매칭이 많이 되는 경로를 우선 선택*하는 법칙.


※ Cisco 명령어)
   - ip route 0.0.0.0(모든 네트워크) 0.0.0.0(SubnetMask) <Next-Hop> : Default Route를 설정
   - 로그 상에서 ***last resort*** 의 의미 : **"최후의 보루"**, 이도저도 안되면(목적지가 특정되지 않으면) 거기로 가라!


> 결론: 가고싶은 목적지가 Routing Table에 없을때 선택하는 최후의 경로가 Default Route이고 선택의 기준은 Longest Match Rule.


### NAT(Network Address Translation)
- 내 / 외부를 구분하는건 항상 중요한 이슈!
- A Class(10.0.0.0 ~ 10.255.255.255.255), B Class(172.16.0.0 ~172.16.255.255), C Class(192.168.0.0 ~ 192.168.0.255)외에는 다 Public이다.
- Public IP는 언제나 부족하기 때문에 Private을 구성해서 사용하게되고 언제나 ***경계(Border)*** 가 발생한다. 여기서 ***NAT*** 가 필요해진다.


1. ***내부 → 외부*** : Source + Dynamic = ***PAT(Port NAT)*** ~ SNAT(Source NAT)
2. ***외부 → 내부*** : Destination + Static = ***DNAT(Destination NAT)***



## 🔥 도전 과제 & 해결 (Challenge & Solution)

- **과제/문제**: X
- **시도 및 해결**: X

## 💭 오늘의 회고 (Retrospective)

- **Keep (좋았던 점)**: 반복 학습이 되니 이제 명령어가 익숙해진다.
- **Problem (아쉬웠던 점)**: 아직까지 리눅스 명령어만큼은 익숙하지 않다.
- **Try (시도할 점)**: 계속계속 반복해서 연습해보기.

## 🔗 참고 자료 (References)
